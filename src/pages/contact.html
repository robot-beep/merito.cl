<!-- Agrega la librería de EmailJS antes de tu script -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<!-- floating assets -->
<img
  class="floating-bubble-1 absolute right-0 top-0 -z-[1]"
  src="images/floating-bubble-1.svg"
  alt=""
/>
<img
  class="floating-bubble-2 absolute left-0 top-[387px] -z-[1]"
  src="images/floating-bubble-2.svg"
  alt=""
/>
<img
  class="floating-bubble-3 absolute right-0 top-[605px] -z-[1]"
  src="images/floating-bubble-3.svg"
  alt=""
/>
<!-- ./end floating assets -->

<!-- Common hero -->
<section class="page-hero pt-16 pb-6">
  <div class="container">
    <div class="page-hero-content mx-auto max-w-[768px] text-center">
      <h1 class="mb-5 mt-8">
        Queremos escuchar tu opinión <br />
        envíanos un mensaje
      </h1>
    </div>
  </div>
</section>
<!-- end Common hero -->

<section class="section pt-0">
  <div class="container">
    <div class="row">
      <div class="mb-10 text-center md:col-6 md:order-2 md:mb-0 md:pt-9">
        <div class="contact-img relative inline-flex pl-5 pb-5">
          <img src="images/contact-img.png" alt="" />
          <img
            class="absolute bottom-0 left-0 -z-[1] h-14 w-14"
            src="images/shape-2.svg"
            alt=""
          />
        </div>
      </div>

      <div class="md:col-6 md:order-1">
        <!-- 1. Agrega el id "contact-form" y quita action y method -->
        <form id="contact-form" class="lg:max-w-[484px]">
          <div class="form-group mb-5">
            <label class="form-label" for="name">Nombre Completo</label>
            <input
              class="form-control"
              type="text"
              id="name"
              placeholder="pepito perez"
            />
          </div>
          <div class="form-group mb-5">
            <label class="form-label" for="email">Correo Electrónico</label>
            <input
              class="form-control"
              type="text"
              id="email"
              placeholder="pepito@evopoli.cl"
            />
          </div>
          <div class="form-group mb-5">
            <label class="form-label" for="message">Escribe tu mensaje</label>
            <textarea
              class="form-control h-[150px]"
              id="message"
              cols="30"
              rows="10"
            ></textarea>
          </div>
          <input
            class="btn btn-primary block w-full"
            type="submit"
            value="Envíar mensaje"
          />
        </form>
      </div>
    </div>
  </div>
</section>

<script>
  // 2. Inicializa EmailJS con tu USER ID (encontrarás este ID en tu Dashboard de EmailJS)
  (function() {
    emailjs.init("ZqgCWvtOTM1S4aNdw"); 
  })();

  // 3. Capturamos el formulario por su ID
  document.getElementById("contact-form").addEventListener("submit", function(event) {
    event.preventDefault(); // Evita que la página se recargue

    // 4. Prepara los parámetros para tu plantilla en EmailJS
    const templateParams = {
      from_name: document.getElementById("name").value,
      from_email: document.getElementById("email").value,
      message: document.getElementById("message").value,
    };

    // 5. Llama al método send de emailjs con tu SERVICE ID y TEMPLATE ID
    emailjs.send("service_u2xfker", "template_uwkf1lb", templateParams)
      .then(function(response) {
          console.log("SUCCESS!", response.status, response.text);
          alert("Tu mensaje ha sido enviado con éxito!");
      }, function(error) {
          console.log("FAILED...", error);
          alert("Hubo un error al enviar tu mensaje. Por favor, intenta de nuevo.");
      });
  });
</script>
